# モデレーション

> **Version**: v0.1  
> **Updated**: 2026-02-02  
> **Authority**: モデレーション機能の権威ファイル。

---

## 1. アクション定義

### 1.1 Kick（退出）

| 項目 | 内容 |
|------|------|
| 効果 | 対象ユーザーをセッションから即時退出 |
| 再入室 | 配信者が選択 |
| 永続性 | セッション終了で解除 |

**再入室オプション**:
- **再入室可**: ロビーに戻る（再承認が必要）
- **再入室不可**: そのセッション中は参加禁止

### 1.2 Mute（発言禁止）

| 項目 | 内容 |
|------|------|
| 効果 | 全アクション禁止（閲覧のみ） |
| 対象 | スタンプ、作業内容更新、休憩チャット |
| 永続性 | 期間指定 or セッション終了まで |

**禁止されるアクション**:
- スタンプ送信
- 作業カテゴリ/短文の更新
- 休憩中のチャット送信
- 完了報告

**許可されるアクション**:
- 画面の閲覧
- 自主退出

**期間オプション**:
- 10分
- 30分
- 60分
- セッション終了まで（**デフォルト**）

> **参照**: `decisions.md` A-002

### 1.3 Ban（ルーム禁止）

| 項目 | 内容 |
|------|------|
| 効果 | ルーム単位で永久禁止 |
| 対象 | 全セッション（過去・現在・未来） |
| 永続性 | 配信者が解除するまで永続 |
| 解除 | 配信者がBAN一覧から手動解除 |

**BANされたユーザーの挙動**:
- セッションコード入力時にエラー
- ロビーに到達できない
- エラーメッセージ: 「このルームには参加できません」

### 1.4 Report（通報）

| 項目 | 内容 |
|------|------|
| 実行者 | 配信者のみ |
| 対象 | セッション参加者 |
| 通報先 | 運営（MVPはDB記録のみ） |

**通報カテゴリ（MVP最小セット）**:

| ID | 表示名 | 説明 |
|----|--------|------|
| `troll` | 荒らし | 意図的な妨害行為 |
| `spam` | スパム | 繰り返しの宣伝・無意味な投稿 |
| `harassment` | 嫌がらせ | 特定ユーザーへの攻撃的行為 |
| `underage` | 未成年疑い | 18歳未満と思われるユーザー（応援関連） |

> **参照**: `decisions.md` A-003

**MVP実装**:
- DB に Report レコードを作成
- 配信者は自分の通報履歴を閲覧可能
- 運営への通知は将来実装

---

## 2. UI導線

### 2.1 配信者ダッシュボード

```
参加者リスト
├─ [ユーザーA] [作業中] ──→ [詳細] → [Kick] [Mute] [Ban] [Report]
├─ [ユーザーB] [休憩中] ──→ [詳細] → [Kick] [Mute] [Ban] [Report]
└─ [ユーザーC] [ミュート中] ──→ [詳細] → [Kick解除] [Mute解除] [Ban] [Report]
```

### 2.2 ワンクリックアクセス

**治安UI強制の原則により、モデレーション機能は常にアクセス可能でなければならない。**

- 参加者リストの各行に「...」メニュー
- メニューからKick/Mute/Ban/Reportに1クリックでアクセス
- 確認ダイアログを表示（誤操作防止）

---

## 3. 履歴と監査

### 3.1 モデレーション履歴

| 項目 | Free | Pro |
|------|------|-----|
| アクション履歴閲覧 | 当日のみ | 30日 |
| 対象ユーザー情報 | 表示名のみ | 実ID含む |
| エクスポート | 不可 | CSV（将来） |

### 3.2 通報ログ保管期間（D-003）

| 項目 | 値 |
|------|-----|
| 保管期間 | **30日固定**（MVP） |
| 自動削除 | 30日経過後に自動削除 |
| 将来拡張 | 法務/開示要請対応で延長の可能性あり |

> **参照**: `decisions.md` D-003

### 3.2 BAN一覧

- 配信者はルームのBAN一覧を常時閲覧可能
- 各BANの日時、理由、対象ユーザーを表示
- 解除ボタンで即時解除

---

## 4. 自動モデレーション（将来）

**MVPでは実装しない。将来の候補:**

- 不適切ワードフィルター
- スパム検出（連続投稿）
- AI による内容分析
